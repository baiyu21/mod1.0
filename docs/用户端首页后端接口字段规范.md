# 用户端首页后端接口字段规范

## 1. 获取报名记录列表接口

### 1.1 接口信息
- **接口路径**: `GET /api/user/registrations/`
- **请求头**: `Authorization: Bearer {token}`
- **请求参数**:
  - `page`: 页码（可选，默认1）
  - `pageSize`: 每页数量（可选，默认10）
  - `category`: 类别筛选（可选）
  - `keyword`: 搜索关键词（可选）

### 1.2 响应数据结构

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 100,
    "page": 1,
    "pageSize": 10,
    "records": [
      {
        "id": "registration_id_001",
        "category": "声乐报名",
        "categoryKey": "vocal",
        "workName": "作品名称",
        "submitTime": "2024-01-15 10:30:00",
        "status": "待审核"
      }
    ]
  }
}
```

### 1.3 列表字段说明

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `id` | string | 是 | 报名记录唯一标识 |
| `category` | string | 是 | 类别中文名称（如：声乐报名、器乐报名等） |
| `categoryKey` | string | 是 | 类别键值（vocal, instrumental, dance, opera, recitation, calligraphy, painting, design, photography, microfilm, artPractice, aestheticInnovation） |
| `workName` | string | 是 | 作品名称（根据类别从不同字段提取） |
| `submitTime` | string | 是 | 提交时间（格式：YYYY-MM-DD HH:mm:ss） |
| `status` | string | 是 | 审核状态（待审核、已审核、已退回） |

### 1.4 类别键值映射

| categoryKey | category（中文名称） |
|------------|-------------------|
| `vocal` | 声乐报名 |
| `instrumental` | 器乐报名 |
| `dance` | 舞蹈报名 |
| `opera` | 戏曲报名 |
| `recitation` | 朗诵报名 |
| `calligraphy` | 书法作品 |
| `painting` | 绘画作品 |
| `design` | 设计作品 |
| `photography` | 摄影作品 |
| `microfilm` | 微电影作品 |
| `artPractice` | 艺术实践工作坊 |
| `aestheticInnovation` | 美育改革创新案例 |

### 1.5 作品名称提取规则

后端应根据类别从不同字段提取 `workName`：

| 类别 | 作品名称字段优先级 |
|------|------------------|
| 声乐报名 (vocal) | `song1` → `workTitle` → `title` |
| 其他演奏类 | `workTitle` → `title` → `workName` |
| 艺术实践工作坊 | `projectName` |
| 美育改革创新案例 | `caseName` |
| 作品类 | `title` → `workTitle` → `workName` |



## 2. 获取报名记录详情接口

### 2.1 接口信息
- **接口路径**: `GET /api/user/registrations/{id}/`
- **请求头**: `Authorization: Bearer {token}`
- **路径参数**: `id` - 报名记录ID

### 2.2 响应数据结构（通用结构）

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "registration_id_001",
    "category": "声乐报名",
    "categoryKey": "vocal",
    "workName": "作品名称",
    "submitTime": "2024-01-15 10:30:00",
    "status": "待审核",
    "base": {
      // 基础表单字段（见下方详细说明）
    },
    "rosters": {
      // 花名册数据（见下方详细说明）
    },
    "files": [
      // 文件列表（见下方详细说明）
    ],
    "intro": "简介内容",
    // 其他类别特有字段（见下方详细说明）
  }
}
```

## 3. 基础表单字段（base）

所有类别共用的基础字段：

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `contact` | string | 是 | 联系人姓名 |
| `phone` | string | 是 | 联系电话 |
| `address` | string | 是 | 联系地址 |
| `group` | string | 否 | 组别 |

## 4. 演奏类字段（声乐、器乐、舞蹈、戏曲、朗诵）

### 4.1 基础字段

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `performanceType` | string | 是 | 表演形式（ensemble, small_ensemble, chamber, solo） |
| `workTitle` | string | 是 | 作品名称 |
| `minutes` | number | 是 | 作品时长（分钟） |
| `seconds` | number | 是 | 作品时长（秒） |
| `isOriginal` | boolean | 是 | 是否原创 |
| `tutor` | string | 否 | 指导教师 |
| `leader` | string | 否 | 领队 |

### 4.2 声乐特有字段

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `song1` | string | 是 | 曲目1 |
| `song2` | string | 否 | 曲目2 |
| `song1HasChinese` | boolean | 否 | 曲目1是否中文作品 |
| `song2HasChinese` | boolean | 否 | 曲目2是否中文作品 |
| `song1IsOriginal` | boolean | 否 | 曲目1是否原创 |
| `song2IsOriginal` | boolean | 否 | 曲目2是否原创 |
| `chorusCount` | number | 否 | 合唱人数 |
| `pianoAccompanist` | string | 否 | 钢琴伴奏（teacher/student） |

## 5. 作品类字段（书法、绘画、设计、摄影）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `title` | string | 是 | 作品名称 |
| `length` | number | 否 | 作品长度（cm） |
| `width` | number | 否 | 作品宽度（cm） |
| `tutor` | string | 否 | 指导教师 |
| `createAt` | string | 否 | 创作时间 |
| `formType` | string | 否 | 作品形式 |

### 5.1 作品类特有字段（在 data 根级别）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `authorIntro` | string | 否 | 作者简介 |
| `creationIntro` | string | 否 | 创作说明 |
| `authors` | array | 否 | 作者列表（见花名册结构） |

## 6. 微电影作品字段

### 6.1 base 字段

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `title` | string | 是 | 作品名称 |
| `videoMinutes` | number | 是 | 作品时长（分钟） |
| `videoSeconds` | number | 是 | 作品时长（秒） |
| `createAt` | string | 否 | 创作时间 |
| `tutor1` | string | 否 | 指导教师1 |
| `tutor2` | string | 否 | 指导教师2 |
| `tutor3` | string | 否 | 指导教师3 |

### 6.2 特有字段（在 data 根级别）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `authorIntro` | string | 否 | 作者简介 |
| `creationIntro` | string | 否 | 创作说明 |
| `authors` | array | 否 | 作者列表 |

## 7. 艺术实践工作坊字段

### 7.1 base 字段

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `projectName` | string | 是 | 项目名称 |
| `contactPosition` | string | 否 | 联系人职务 |
| `contactUnit` | string | 否 | 联系单位 |
| `email` | string | 否 | 邮箱 |
| `category` | string | 否 | 类别 |

### 7.2 特有字段（在 data 根级别）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `projectIntro` | string | 否 | 项目简介 |
| `designThoughts` | string | 否 | 设计思路 |
| `exhibitionDesign` | string | 否 | 展览设计 |
| `participants` | array | 否 | 参与人员列表（见花名册结构） |

## 8. 美育改革创新案例字段

### 8.1 base 字段

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `caseName` | string | 是 | 案例名称 |
| `caseCode` | string | 否 | 案例代码 |
| `leaderName` | string | 是 | 负责人姓名 |
| `leaderTitle` | string | 否 | 负责人职称 |
| `submitUnit` | string | 否 | 报送单位 |
| `leaderUnit` | string | 否 | 负责人单位 |
| `leaderPhone` | string | 否 | 负责人电话 |
| `category` | string | 否 | 类别（选题方向） |

## 9. 花名册数据结构（rosters）

```json
{
  "rosters": {
    "teachers": [
      {
        "name": "张老师",
        "idCardNumber": "310101198501011234",
        "ethnicity": "汉族",
        "age": 40,
        "gender": "male",
        "region": "上海市",
        "schoolName": "上海音乐学院",
        "department": "钢琴系",
        "phone": "13987654321"
      }
    ],
    "members": [
      {
        "name": "王五",
        "idCardNumber": "310101200001011234",
        "ethnicity": "汉族",
        "age": 22,
        "gender": "male",
        "region": "上海市",
        "schoolName": "上海音乐学院",
        "department": "钢琴系",
        "grade": "大四",
        "majorCategory": "艺术",
        "majorName": "钢琴表演",
        "studentId": "20180001",
        "phone": "13765432109"
      }
    ],
    "accomp": [],
    "studentAccomp": [],
    "teacherAccomp": [],
    "participants": []
  }
}
```

### 9.1 教师花名册字段（teachers）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `name` | string | 是 | 姓名 |
| `idCardNumber` | string | 是 | 身份证号 |
| `ethnicity` | string | 是 | 民族（如：汉族） |
| `age` | number | 是 | 年龄 |
| `gender` | string | 是 | 性别（male/female） |
| `region` | string | 是 | 所在地区 |
| `schoolName` | string | 是 | 学校名称 |
| `department` | string | 是 | 所在院系/部门 |
| `phone` | string | 是 | 联系方式 |

### 9.2 成员花名册字段（members）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `name` | string | 是 | 姓名 |
| `idCardNumber` | string | 是 | 身份证号 |
| `ethnicity` | string | 是 | 民族 |
| `age` | number | 是 | 年龄 |
| `gender` | string | 是 | 性别（male/female） |
| `region` | string | 是 | 所在地区 |
| `schoolName` | string | 是 | 学校名称 |
| `department` | string | 是 | 所在院系 |
| `grade` | string | 是 | 年级（大一、大二、大三、大四等） |
| `majorCategory` | string | 是 | 专业类别（艺术/非艺术） |
| `majorName` | string | 是 | 专业名称 |
| `studentId` | string | 是 | 学号 |
| `phone` | string | 是 | 联系方式 |

### 9.3 其他花名册类型

- `accomp`: 伴奏（结构同 members）
- `studentAccomp`: 学生伴奏（结构同 members）
- `teacherAccomp`: 教师伴奏（结构同 teachers）
- `participants`: 参与人员（结构同 members）
- `authors`: 作者（结构同 members，用于作品类）

## 10. 文件列表结构（files）

```json
{
  "files": [
    {
      "name": "作品文件.mp3",
      "size": 5242880,
      "type": "audio/mpeg",
      "url": "https://example.com/files/xxx.mp3"
    }
  ]
}
```

### 10.1 文件字段说明

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `name` | string | 是 | 文件名 |
| `size` | number | 是 | 文件大小（字节） |
| `type` | string | 否 | 文件类型（MIME类型） |
| `url` | string | 否 | 文件访问URL |

## 11. 简介字段（intro）

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `intro` | string | 否 | 通用简介（优先级最高） |
| `creationIntro` | string | 否 | 创作说明（作品类） |
| `projectIntro` | string | 否 | 项目简介（艺术实践工作坊） |
| `authorIntro` | string | 否 | 作者简介（作品类） |
| `designThoughts` | string | 否 | 设计思路（艺术实践工作坊） |
| `exhibitionDesign` | string | 否 | 展览设计（艺术实践工作坊） |

**注意**：前端会按以下优先级显示简介：
1. `intro`（通用）
2. `creationIntro`（创作说明）
3. `projectIntro`（项目简介）
4. `authorIntro`（作者简介）
5. `designThoughts`（设计思路）
6. `exhibitionDesign`（展览设计）

## 12. 完整示例

### 12.1 声乐报名详情示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "vocal_001",
    "category": "声乐报名",
    "categoryKey": "vocal",
    "workName": "黄河大合唱",
    "submitTime": "2024-01-15 10:30:00",
    "status": "待审核",
    "base": {
      "performanceType": "ensemble",
      "workTitle": "黄河大合唱",
      "minutes": 5,
      "seconds": 30,
      "isOriginal": false,
      "song1": "黄河大合唱",
      "song2": "义勇军进行曲",
      "song1HasChinese": true,
      "song2HasChinese": true,
      "song1IsOriginal": false,
      "song2IsOriginal": false,
      "chorusCount": 50,
      "pianoAccompanist": "teacher",
      "leader": "张老师",
      "tutor": "李老师",
      "contact": "张三",
      "phone": "13800138000",
      "address": "北京市海淀区",
      "group": "group1"
    },
    "rosters": {
      "teachers": [
        {
          "name": "李老师",
          "idCardNumber": "110101198001011234",
          "ethnicity": "汉族",
          "age": 45,
          "gender": "female",
          "region": "北京市",
          "schoolName": "北京音乐学院",
          "department": "声乐系",
          "phone": "13900139000"
        }
      ],
      "members": [
        {
          "name": "王同学",
          "idCardNumber": "110101200001011234",
          "ethnicity": "汉族",
          "age": 22,
          "gender": "male",
          "region": "北京市",
          "schoolName": "北京音乐学院",
          "department": "声乐系",
          "grade": "大四",
          "majorCategory": "艺术",
          "majorName": "声乐表演",
          "studentId": "20200001",
          "phone": "13700137000"
        }
      ],
      "accomp": [],
      "studentAccomp": [],
      "teacherAccomp": []
    },
    "files": [
      {
        "name": "黄河大合唱.mp3",
        "size": 5242880,
        "type": "audio/mpeg",
        "url": "https://example.com/files/vocal_001.mp3"
      }
    ],
    "intro": "经典合唱作品"
  }
}
```

### 12.2 书法作品详情示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "calligraphy_001",
    "category": "书法作品",
    "categoryKey": "calligraphy",
    "workName": "兰亭序",
    "submitTime": "2024-01-15 10:30:00",
    "status": "待审核",
    "base": {
      "title": "兰亭序",
      "length": 100,
      "width": 50,
      "tutor": "王老师",
      "createAt": "2024-01-01",
      "formType": "行书",
      "group": "group1",
      "contact": "李四",
      "phone": "13800138000",
      "address": "北京市海淀区"
    },
    "rosters": {
      "teachers": [],
      "members": [],
      "accomp": []
    },
    "files": [
      {
        "name": "兰亭序.jpg",
        "size": 2097152,
        "type": "image/jpeg",
        "url": "https://example.com/files/calligraphy_001.jpg"
      }
    ],
    "authors": [
      {
        "name": "张同学",
        "idCardNumber": "110101200001011234",
        "ethnicity": "汉族",
        "age": 20,
        "gender": "male",
        "region": "北京市",
        "schoolName": "北京美术学院",
        "department": "书法系",
        "grade": "大三",
        "majorCategory": "艺术",
        "majorName": "书法",
        "studentId": "20200001",
        "phone": "13700137000"
      }
    ],
    "authorIntro": "作者简介内容",
    "creationIntro": "创作说明内容"
  }
}
```

## 13. 状态值说明

| 状态值 | 说明 | 前端显示 |
|--------|------|---------|
| `待审核` | 已提交，等待审核 | 黄色标签（warning） |
| `已审核` | 审核通过 | 绿色标签（success） |
| `已退回` | 审核退回 | 灰色标签（info） |

## 14. 注意事项

1. **字段命名**：所有字段使用驼峰命名（camelCase），与前端保持一致
2. **必填字段**：标记为"必填"的字段必须返回，不能为 `null` 或空字符串
3. **可选字段**：标记为"否"的字段可以返回 `null` 或省略，前端会做空值处理
4. **数组字段**：如果数组为空，应返回空数组 `[]`，而不是 `null`
5. **时间格式**：所有时间字段统一使用 `YYYY-MM-DD HH:mm:ss` 格式
6. **分页**：列表接口必须支持分页，返回 `total`、`page`、`pageSize` 字段
7. **筛选**：列表接口应支持按 `category` 和 `keyword` 筛选
8. **权限**：接口应验证用户身份，只能返回当前用户提交的报名记录

## 15. 错误响应格式

```json
{
  "code": 400,
  "message": "错误信息",
  "data": null
}
```

常见错误码：
- `400`: 请求参数错误
- `401`: 未授权（token 无效或过期）
- `403`: 无权限访问
- `404`: 记录不存在
- `500`: 服务器内部错误

